<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamurAI System - La Casa del Samurai S.A.S.</title>
    <style>
        :root {
            --azul-profundo: #1a365d;
            --rojo-samurai: #c53030;
            --gris-metalico: #4a5568;
            --blanco: #ffffff;
            --gris-claro: #f7fafc;
            --gris-medio: #e2e8f0;
            --verde: #38a169;
            --naranja: #dd6b20;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--gris-claro);
            color: var(--azul-profundo);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--azul-profundo), var(--gris-metalico));
            color: var(--blanco);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background-color: var(--rojo-samurai);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
        }
        
        .logo-text h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .logo-text p {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: var(--blanco);
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255,255,255,0.1);
        }
        
        /* Main Content */
        main {
            padding: 2rem 0;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }
        
        .sidebar {
            background-color: var(--blanco);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 20px;
        }
        
        .sidebar h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gris-medio);
            color: var(--rojo-samurai);
        }
        
        .sidebar ul {
            list-style: none;
        }
        
        .sidebar li {
            margin-bottom: 10px;
        }
        
        .sidebar a {
            display: block;
            padding: 10px;
            border-radius: 4px;
            text-decoration: none;
            color: var(--azul-profundo);
            transition: background-color 0.3s;
        }
        
        .sidebar a:hover, .sidebar a.active {
            background-color: var(--gris-medio);
        }
        
        .content {
            background-color: var(--blanco);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 20px;
        }
        
        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gris-medio);
        }
        
        .content-header h2 {
            color: var(--rojo-samurai);
        }
        
        .btn {
            background-color: var(--rojo-samurai);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #a53030;
        }
        
        .btn-secondary {
            background-color: var(--azul-profundo);
        }
        
        .btn-secondary:hover {
            background-color: #0f2a4d;
        }
        
        /* Tablas */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--gris-medio);
        }
        
        th {
            background-color: var(--gris-claro);
            font-weight: 600;
            color: var(--azul-profundo);
        }
        
        tr:hover {
            background-color: var(--gris-claro);
        }
        
        .actions {
            display: flex;
            gap: 10px;
        }
        
        .edit-btn, .delete-btn, .status-btn {
            padding: 5px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .edit-btn {
            background-color: var(--azul-profundo);
            color: white;
        }
        
        .delete-btn {
            background-color: #e53e3e;
            color: white;
        }
        
        .status-btn {
            background-color: var(--naranja);
            color: white;
        }
        
        /* Estados de órdenes */
        .estado {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .estado.pendiente {
            background-color: #fed7d7;
            color: #c53030;
        }
        
        .estado.en-progreso {
            background-color: #feebc8;
            color: #dd6b20;
        }
        
        .estado.completado {
            background-color: #c6f6d5;
            color: #38a169;
        }
        
        /* Formularios */
        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gris-medio);
            border-radius: 4px;
            font-size: 1rem;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .cancel-btn {
            background-color: var(--gris-metalico);
            color: white;
        }
        
        /* Dashboard Cards */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: var(--blanco);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .card h3 {
            font-size: 2rem;
            color: var(--rojo-samurai);
            margin-bottom: 10px;
        }
        
        .card p {
            color: var(--gris-metalico);
            font-weight: 500;
        }
        
        /* Secciones */
        .section {
            margin-bottom: 30px;
        }
        
        /* Modales */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* Footer */
        footer {
            background-color: var(--azul-profundo);
            color: var(--blanco);
            padding: 2rem 0;
            margin-top: 2rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-section h3 {
            margin-bottom: 15px;
            color: var(--rojo-samurai);
        }
        
        .footer-section p, .footer-section a {
            color: rgba(255,255,255,0.8);
            margin-bottom: 10px;
            display: block;
            text-decoration: none;
        }
        
        .footer-section a:hover {
            color: var(--blanco);
        }
        
        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
            }
            
            .content {
                order: 1;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">侍</div>
                    <div class="logo-text">
                        <h1>SamurAI System</h1>
                        <p>La Casa del Samurai S.A.S.</p>
                    </div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="active" data-section="dashboard">Dashboard</a></li>
                        <li><a href="#" data-section="ordenes">Órdenes</a></li>
                        <li><a href="#" data-section="clientes">Clientes</a></li>
                        <li><a href="#" data-section="tecnicos">Técnicos</a></li>
                        <li><a href="#" data-section="inventario">Inventario</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    
    <main class="container">
        <div class="dashboard">
            <aside class="sidebar">
                <h3>Módulos</h3>
                <ul>
                    <li><a href="#" class="active" data-section="dashboard">Dashboard</a></li>
                    <li><a href="#" data-section="ordenes">Órdenes de Servicio</a></li>
                    <li><a href="#" data-section="clientes">Gestión de Clientes</a></li>
                    <li><a href="#" data-section="tecnicos">Gestión de Técnicos</a></li>
                    <li><a href="#" data-section="inventario">Inventario</a></li>
                    <li><a href="#" data-section="reportes">Reportes y KPIs</a></li>
                    <li><a href="#" data-section="facturacion">Facturación</a></li>
                </ul>
                
                <h3>Filosofía</h3>
                <p style="font-size: 0.9rem; margin-top: 10px;">
                    "Eficiencia y trazabilidad en cada servicio"
                </p>
            </aside>
            
            <section class="content">
                <!-- Dashboard -->
                <div id="dashboard-section" class="content-section">
                    <div class="content-header">
                        <h2>Dashboard Principal</h2>
                        <button class="btn" id="nuevaOrdenBtn">Nueva Orden</button>
                    </div>
                    
                    <div class="stats-cards">
                        <div class="card">
                            <h3 id="totalOrdenes">0</h3>
                            <p>Órdenes Activas</p>
                        </div>
                        <div class="card">
                            <h3 id="totalClientes">0</h3>
                            <p>Clientes Registrados</p>
                        </div>
                        <div class="card">
                            <h3 id="totalTecnicos">0</h3>
                            <p>Técnicos Activos</p>
                        </div>
                        <div class="card">
                            <h3 id="ordenesPendientes">0</h3>
                            <p>Órdenes Pendientes</p>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>Órdenes de Servicio Recientes</h3>
                        <table id="tablaOrdenes">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Servicio</th>
                                    <th>Técnico</th>
                                    <th>Estado</th>
                                    <th>Fecha</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpoTablaOrdenes">
                                <!-- Las órdenes se cargarán aquí dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Gestión de Órdenes -->
                <div id="ordenes-section" class="content-section" style="display: none;">
                    <div class="content-header">
                        <h2>Gestión de Órdenes de Servicio</h2>
                        <button class="btn" id="nuevaOrdenBtn2">Nueva Orden</button>
                    </div>
                    
                    <div class="section">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Servicio</th>
                                    <th>Técnico</th>
                                    <th>Estado</th>
                                    <th>Prioridad</th>
                                    <th>Fecha</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpoTablaOrdenesCompleta">
                                <!-- Las órdenes se cargarán aquí dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Gestión de Clientes -->
                <div id="clientes-section" class="content-section" style="display: none;">
                    <div class="content-header">
                        <h2>Gestión de Clientes</h2>
                        <button class="btn" id="nuevoClienteBtn">Nuevo Cliente</button>
                    </div>
                    
                    <div class="section">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre/Empresa</th>
                                    <th>Contacto</th>
                                    <th>Teléfono</th>
                                    <th>Email</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpoTablaClientes">
                                <!-- Los clientes se cargarán aquí dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Gestión de Técnicos -->
                <div id="tecnicos-section" class="content-section" style="display: none;">
                    <div class="content-header">
                        <h2>Gestión de Técnicos</h2>
                        <button class="btn" id="nuevoTecnicoBtn">Nuevo Técnico</button>
                    </div>
                    
                    <div class="section">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Especialidad</th>
                                    <th>Teléfono</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpoTablaTecnicos">
                                <!-- Los técnicos se cargarán aquí dinámicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Inventario -->
                <div id="inventario-section" class="content-section" style="display: none;">
                    <div class="content-header">
                        <h2>Gestión de Inventario</h2>
                        <button class="btn" id="nuevoItemBtn">Nuevo Item</button>
                    </div>
                    
                    <div class="section">
                        <p>Módulo en desarrollo. Próximamente disponible.</p>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>SamurAI System</h3>
                    <p>Software de gestión de servicios inspirado en la filosofía samurái: disciplina, precisión y honor.</p>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p>info@lacasadelsamurai.com</p>
                    <p>+57 300 123 4567</p>
                    <p>Corozal, Sucre - Colombia</p>
                </div>
                <div class="footer-section">
                    <h3>Enlaces</h3>
                    <a href="#">Sobre Nosotros</a>
                    <a href="#">Planes y Precios</a>
                    <a href="#">Soporte Técnico</a>
                    <a href="#">Política de Privacidad</a>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 La Casa del Samurai S.A.S. - Todos los derechos reservados</p>
            </div>
        </div>
    </footer>

    <!-- Modal para nueva orden -->
    <div id="modalOrden" class="modal">
        <div class="modal-content">
            <h2 id="tituloModalOrden">Nueva Orden de Servicio</h2>
            <form id="formOrden">
                <div class="form-group">
                    <label for="cliente">Cliente</label>
                    <select id="cliente" required>
                        <option value="">Seleccionar cliente</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="servicio">Tipo de Servicio</label>
                    <input type="text" id="servicio" required placeholder="Ej: Reparación de aire acondicionado">
                </div>
                <div class="form-group">
                    <label for="descripcion">Descripción</label>
                    <textarea id="descripcion" required placeholder="Describa el problema o servicio requerido"></textarea>
                </div>
                <div class="form-group">
                    <label for="tecnico">Técnico Asignado</label>
                    <select id="tecnico" required>
                        <option value="">Seleccionar técnico</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="prioridad">Prioridad</label>
                    <select id="prioridad" required>
                        <option value="Baja">Baja</option>
                        <option value="Media">Media</option>
                        <option value="Alta">Alta</option>
                        <option value="Urgente">Urgente</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn cancel-btn" id="cancelarOrden">Cancelar</button>
                    <button type="submit" class="btn">Guardar Orden</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para nuevo cliente -->
    <div id="modalCliente" class="modal">
        <div class="modal-content">
            <h2 id="tituloModalCliente">Nuevo Cliente</h2>
            <form id="formCliente">
                <div class="form-group">
                    <label for="nombreCliente">Nombre/Empresa</label>
                    <input type="text" id="nombreCliente" required placeholder="Nombre de la empresa o cliente">
                </div>
                <div class="form-group">
                    <label for="contactoCliente">Persona de Contacto</label>
                    <input type="text" id="contactoCliente" required placeholder="Nombre del contacto principal">
                </div>
                <div class="form-group">
                    <label for="telefonoCliente">Teléfono</label>
                    <input type="text" id="telefonoCliente" required placeholder="Número de teléfono">
                </div>
                <div class="form-group">
                    <label for="emailCliente">Email</label>
                    <input type="email" id="emailCliente" required placeholder="Correo electrónico">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn cancel-btn" id="cancelarCliente">Cancelar</button>
                    <button type="submit" class="btn">Guardar Cliente</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para nuevo técnico -->
    <div id="modalTecnico" class="modal">
        <div class="modal-content">
            <h2 id="tituloModalTecnico">Nuevo Técnico</h2>
            <form id="formTecnico">
                <div class="form-group">
                    <label for="nombreTecnico">Nombre Completo</label>
                    <input type="text" id="nombreTecnico" required placeholder="Nombre del técnico">
                </div>
                <div class="form-group">
                    <label for="especialidadTecnico">Especialidad</label>
                    <input type="text" id="especialidadTecnico" required placeholder="Ej: Electricidad, Refrigeración, etc.">
                </div>
                <div class="form-group">
                    <label for="telefonoTecnico">Teléfono</label>
                    <input type="text" id="telefonoTecnico" required placeholder="Número de teléfono">
                </div>
                <div class="form-group">
                    <label for="estadoTecnico">Estado</label>
                    <select id="estadoTecnico" required>
                        <option value="Activo">Activo</option>
                        <option value="Inactivo">Inactivo</option>
                        <option value="Vacaciones">Vacaciones</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn cancel-btn" id="cancelarTecnico">Cancelar</button>
                    <button type="submit" class="btn">Guardar Técnico</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para cambiar estado de orden -->
    <div id="modalEstado" class="modal">
        <div class="modal-content">
            <h2>Cambiar Estado de Orden</h2>
            <form id="formEstado">
                <div class="form-group">
                    <label for="nuevoEstado">Nuevo Estado</label>
                    <select id="nuevoEstado" required>
                        <option value="Pendiente">Pendiente</option>
                        <option value="En progreso">En progreso</option>
                        <option value="Completado">Completado</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn cancel-btn" id="cancelarEstado">Cancelar</button>
                    <button type="submit" class="btn">Actualizar Estado</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Datos de ejemplo para la demostración
        let clientes = [
            { id: 1, nombre: "Empresa ABC S.A.S.", contacto: "Carlos Rodríguez", telefono: "3001112233", email: "carlos@empresaabc.com" },
            { id: 2, nombre: "Taller Eléctrico XYZ", contacto: "María González", telefono: "3004445566", email: "maria@tallerelectrico.com" },
            { id: 3, nombre: "Cliente Particular", contacto: "Juan Pérez", telefono: "3007778899", email: "juan.perez@email.com" }
        ];
        
        let tecnicos = [
            { id: 1, nombre: "Luis Martínez", especialidad: "Electricidad", telefono: "3001234567", estado: "Activo" },
            { id: 2, nombre: "Ana Rodríguez", especialidad: "Refrigeración", telefono: "3007654321", estado: "Activo" },
            { id: 3, nombre: "Pedro Sánchez", especialidad: "Electrónica", telefono: "3009876543", estado: "Activo" }
        ];
        
        let ordenes = [
            { id: 1, clienteId: 1, servicio: "Mantenimiento preventivo", descripcion: "Revisión general del sistema eléctrico", tecnicoId: 1, estado: "En progreso", fecha: "2025-10-15", prioridad: "Media" },
            { id: 2, clienteId: 2, servicio: "Reparación de equipo", descripcion: "Fallo en compresor de refrigerador", tecnicoId: 2, estado: "Pendiente", fecha: "2025-10-14", prioridad: "Alta" },
            { id: 3, clienteId: 3, servicio: "Instalación", descripcion: "Instalación de aire acondicionado split", tecnicoId: 3, estado: "Completado", fecha: "2025-10-12", prioridad: "Baja" }
        ];
        
        // Elementos del DOM
        const cuerpoTablaOrdenes = document.getElementById('cuerpoTablaOrdenes');
        const cuerpoTablaOrdenesCompleta = document.getElementById('cuerpoTablaOrdenesCompleta');
        const cuerpoTablaClientes = document.getElementById('cuerpoTablaClientes');
        const cuerpoTablaTecnicos = document.getElementById('cuerpoTablaTecnicos');
        const totalOrdenes = document.getElementById('totalOrdenes');
        const totalClientes = document.getElementById('totalClientes');
        const totalTecnicos = document.getElementById('totalTecnicos');
        const ordenesPendientes = document.getElementById('ordenesPendientes');
        
        // Botones
        const nuevaOrdenBtn = document.getElementById('nuevaOrdenBtn');
        const nuevaOrdenBtn2 = document.getElementById('nuevaOrdenBtn2');
        const nuevoClienteBtn = document.getElementById('nuevoClienteBtn');
        const nuevoTecnicoBtn = document.getElementById('nuevoTecnicoBtn');
        
        // Modales
        const modalOrden = document.getElementById('modalOrden');
        const modalCliente = document.getElementById('modalCliente');
        const modalTecnico = document.getElementById('modalTecnico');
        const modalEstado = document.getElementById('modalEstado');
        
        // Formularios
        const formOrden = document.getElementById('formOrden');
        const formCliente = document.getElementById('formCliente');
        const formTecnico = document.getElementById('formTecnico');
        const formEstado = document.getElementById('formEstado');
        
        // Selects
        const selectCliente = document.getElementById('cliente');
        const selectTecnico = document.getElementById('tecnico');
        
        // Variables para seguimiento
        let ordenEditando = null;
        let clienteEditando = null;
        let tecnicoEditando = null;
        let ordenCambioEstado = null;
        
        // Inicializar la aplicación
        function inicializarApp() {
            actualizarEstadisticas();
            cargarOrdenes();
            cargarClientes();
            cargarTecnicos();
            cargarSelects();
            
            // Event listeners para navegación
            document.querySelectorAll('nav a, .sidebar a').forEach(enlace => {
                enlace.addEventListener('click', (e) => {
                    e.preventDefault();
                    const seccion = e.target.getAttribute('data-section');
                    if (seccion) {
                        mostrarSeccion(seccion);
                    }
                });
            });
            
            // Event listeners para botones
            nuevaOrdenBtn.addEventListener('click', () => mostrarModalOrden());
            nuevaOrdenBtn2.addEventListener('click', () => mostrarModalOrden());
            nuevoClienteBtn.addEventListener('click', () => mostrarModalCliente());
            nuevoTecnicoBtn.addEventListener('click', () => mostrarModalTecnico());
            
            // Event listeners para cancelar modales
            document.getElementById('cancelarOrden').addEventListener('click', () => ocultarModal(modalOrden));
            document.getElementById('cancelarCliente').addEventListener('click', () => ocultarModal(modalCliente));
            document.getElementById('cancelarTecnico').addEventListener('click', () => ocultarModal(modalTecnico));
            document.getElementById('cancelarEstado').addEventListener('click', () => ocultarModal(modalEstado));
            
            // Event listeners para formularios
            formOrden.addEventListener('submit', guardarOrden);
            formCliente.addEventListener('submit', guardarCliente);
            formTecnico.addEventListener('submit', guardarTecnico);
            formEstado.addEventListener('submit', cambiarEstadoOrden);
            
            // Mostrar dashboard por defecto
            mostrarSeccion('dashboard');
        }
        
        // Mostrar sección específica
        function mostrarSeccion(seccion) {
            // Ocultar todas las secciones
            document.querySelectorAll('.content-section').forEach(sec => {
                sec.style.display = 'none';
            });
            
            // Mostrar la sección seleccionada
            document.getElementById(`${seccion}-section`).style.display = 'block';
            
            // Actualizar navegación activa
            document.querySelectorAll('nav a, .sidebar a').forEach(enlace => {
                enlace.classList.remove('active');
                if (enlace.getAttribute('data-section') === seccion) {
                    enlace.classList.add('active');
                }
            });
            
            // Recargar datos si es necesario
            if (seccion === 'ordenes') {
                cargarOrdenesCompleta();
            } else if (seccion === 'clientes') {
                cargarClientes();
            } else if (seccion === 'tecnicos') {
                cargarTecnicos();
            }
        }
        
        // Actualizar estadísticas del dashboard
        function actualizarEstadisticas() {
            totalOrdenes.textContent = ordenes.length;
            totalClientes.textContent = clientes.length;
            totalTecnicos.textContent = tecnicos.length;
            
            const pendientes = ordenes.filter(orden => orden.estado === 'Pendiente').length;
            ordenesPendientes.textContent = pendientes;
        }
        
        // Cargar órdenes en la tabla del dashboard
        function cargarOrdenes() {
            cuerpoTablaOrdenes.innerHTML = '';
            
            // Mostrar solo las últimas 5 órdenes en el dashboard
            const ordenesRecientes = [...ordenes].sort((a, b) => new Date(b.fecha) - new Date(a.fecha)).slice(0, 5);
            
            ordenesRecientes.forEach(orden => {
                const cliente = clientes.find(c => c.id === orden.clienteId);
                const tecnico = tecnicos.find(t => t.id === orden.tecnicoId);
                
                const fila = document.createElement('tr');
                fila.innerHTML = `
                    <td>#${orden.id}</td>
                    <td>${cliente ? cliente.nombre : 'Cliente no encontrado'}</td>
                    <td>${orden.servicio}</td>
                    <td>${tecnico ? tecnico.nombre : 'Técnico no asignado'}</td>
                    <td><span class="estado ${orden.estado.toLowerCase().replace(' ', '-')}">${orden.estado}</span></td>
                    <td>${orden.fecha}</td>
                    <td class="actions">
                        <button class="status-btn" data-id="${orden.id}">Estado</button>
                    </td>
                `;
                
                cuerpoTablaOrdenes.appendChild(fila);
            });
            
            // Agregar event listeners a los botones de estado
            document.querySelectorAll('#cuerpoTablaOrdenes .status-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    cambiarEstadoOrdenModal(id);
                });
            });
        }
        
        // Cargar órdenes en la tabla completa de gestión
        function cargarOrdenesCompleta() {
            cuerpoTablaOrdenesCompleta.innerHTML = '';
            
            ordenes.forEach(orden => {
                const cliente = clientes.find(c => c.id === orden.clienteId);
                const tecnico = tecnicos.find(t => t.id === orden.tecnicoId);
                
                const fila = document.createElement('tr');
                fila.innerHTML = `
                    <td>#${orden.id}</td>
                    <td>${cliente ? cliente.nombre : 'Cliente no encontrado'}</td>
                    <td>${orden.servicio}</td>
                    <td>${tecnico ? tecnico.nombre : 'Técnico no asignado'}</td>
                    <td><span class="estado ${orden.estado.toLowerCase().replace(' ', '-')}">${orden.estado}</span></td>
                    <td>${orden.prioridad}</td>
                    <td>${orden.fecha}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${orden.id}">Editar</button>
                        <button class="status-btn" data-id="${orden.id}">Estado</button>
                        <button class="delete-btn" data-id="${orden.id}">Eliminar</button>
                    </td>
                `;
                
                cuerpoTablaOrdenesCompleta.appendChild(fila);
            });
            
            // Agregar event listeners a los botones
            document.querySelectorAll('#cuerpoTablaOrdenesCompleta .edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    editarOrden(id);
                });
            });
            
            document.querySelectorAll('#cuerpoTablaOrdenesCompleta .status-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    cambiarEstadoOrdenModal(id);
                });
            });
            
            document.querySelectorAll('#cuerpoTablaOrdenesCompleta .delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    eliminarOrden(id);
                });
            });
        }
        
        // Cargar clientes en la tabla
        function cargarClientes() {
            cuerpoTablaClientes.innerHTML = '';
            
            clientes.forEach(cliente => {
                const fila = document.createElement('tr');
                fila.innerHTML = `
                    <td>#${cliente.id}</td>
                    <td>${cliente.nombre}</td>
                    <td>${cliente.contacto}</td>
                    <td>${cliente.telefono}</td>
                    <td>${cliente.email}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${cliente.id}">Editar</button>
                        <button class="delete-btn" data-id="${cliente.id}">Eliminar</button>
                    </td>
                `;
                
                cuerpoTablaClientes.appendChild(fila);
            });
            
            // Agregar event listeners a los botones
            document.querySelectorAll('#cuerpoTablaClientes .edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    editarCliente(id);
                });
            });
            
            document.querySelectorAll('#cuerpoTablaClientes .delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    eliminarCliente(id);
                });
            });
        }
        
        // Cargar técnicos en la tabla
        function cargarTecnicos() {
            cuerpoTablaTecnicos.innerHTML = '';
            
            tecnicos.forEach(tecnico => {
                const fila = document.createElement('tr');
                fila.innerHTML = `
                    <td>#${tecnico.id}</td>
                    <td>${tecnico.nombre}</td>
                    <td>${tecnico.especialidad}</td>
                    <td>${tecnico.telefono}</td>
                    <td>${tecnico.estado}</td>
                    <td class="actions">
                        <button class="edit-btn" data-id="${tecnico.id}">Editar</button>
                        <button class="delete-btn" data-id="${tecnico.id}">Eliminar</button>
                    </td>
                `;
                
                cuerpoTablaTecnicos.appendChild(fila);
            });
            
            // Agregar event listeners a los botones
            document.querySelectorAll('#cuerpoTablaTecnicos .edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    editarTecnico(id);
                });
            });
            
            document.querySelectorAll('#cuerpoTablaTecnicos .delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.getAttribute('data-id'));
                    eliminarTecnico(id);
                });
            });
        }
        
        // Cargar opciones en los selects del formulario
        function cargarSelects() {
            // Limpiar selects
            selectCliente.innerHTML = '<option value="">Seleccionar cliente</option>';
            selectTecnico.innerHTML = '<option value="">Seleccionar técnico</option>';
            
            // Cargar clientes
            clientes.forEach(cliente => {
                const option = document.createElement('option');
                option.value = cliente.id;
                option.textContent = cliente.nombre;
                selectCliente.appendChild(option);
            });
            
            // Cargar técnicos
            tecnicos.forEach(tecnico => {
                const option = document.createElement('option');
                option.value = tecnico.id;
                option.textContent = tecnico.nombre;
                selectTecnico.appendChild(option);
            });
        }
        
        // Mostrar modal para nueva orden
        function mostrarModalOrden() {
            document.getElementById('tituloModalOrden').textContent = 'Nueva Orden de Servicio';
            formOrden.reset();
            formOrden.dataset.modo = 'nuevo';
            ordenEditando = null;
            mostrarModal(modalOrden);
        }
        
        // Mostrar modal para nuevo cliente
        function mostrarModalCliente() {
            document.getElementById('tituloModalCliente').textContent = 'Nuevo Cliente';
            formCliente.reset();
            formCliente.dataset.modo = 'nuevo';
            clienteEditando = null;
            mostrarModal(modalCliente);
        }
        
        // Mostrar modal para nuevo técnico
        function mostrarModalTecnico() {
            document.getElementById('tituloModalTecnico').textContent = 'Nuevo Técnico';
            formTecnico.reset();
            formTecnico.dataset.modo = 'nuevo';
            tecnicoEditando = null;
            mostrarModal(modalTecnico);
        }
        
        // Mostrar modal para cambiar estado de orden
        function cambiarEstadoOrdenModal(id) {
            const orden = ordenes.find(o => o.id === id);
            if (!orden) return;
            
            ordenCambioEstado = id;
            document.getElementById('nuevoEstado').value = orden.estado;
            mostrarModal(modalEstado);
        }
        
        // Mostrar modal
        function mostrarModal(modal) {
            modal.style.display = 'flex';
        }
        
        // Ocultar modal
        function ocultarModal(modal) {
            modal.style.display = 'none';
        }
        
        // Guardar nueva orden
        function guardarOrden(e) {
            e.preventDefault();
            
            const modo = formOrden.dataset.modo;
            const clienteId = parseInt(selectCliente.value);
            const servicio = document.getElementById('servicio').value;
            const descripcion = document.getElementById('descripcion').value;
            const tecnicoId = parseInt(selectTecnico.value);
            const prioridad = document.getElementById('prioridad').value;
            
            if (modo === 'nuevo') {
                // Crear nueva orden
                const nuevaOrden = {
                    id: ordenes.length > 0 ? Math.max(...ordenes.map(o => o.id)) + 1 : 1,
                    clienteId: clienteId,
                    servicio: servicio,
                    descripcion: descripcion,
                    tecnicoId: tecnicoId,
                    estado: 'Pendiente',
                    fecha: new Date().toISOString().split('T')[0],
                    prioridad: prioridad
                };
                
                ordenes.push(nuevaOrden);
            } else if (modo === 'editar' && ordenEditando) {
                // Actualizar orden existente
                const ordenIndex = ordenes.findIndex(o => o.id === ordenEditando);
                if (ordenIndex !== -1) {
                    ordenes[ordenIndex].clienteId = clienteId;
                    ordenes[ordenIndex].servicio = servicio;
                    ordenes[ordenIndex].descripcion = descripcion;
                    ordenes[ordenIndex].tecnicoId = tecnicoId;
                    ordenes[ordenIndex].prioridad = prioridad;
                }
            }
            
            // Actualizar la interfaz
            actualizarEstadisticas();
            cargarOrdenes();
            cargarOrdenesCompleta();
            ocultarModal(modalOrden);
            
            alert(modo === 'nuevo' ? 'Orden creada exitosamente' : 'Orden actualizada exitosamente');
        }
        
        // Guardar nuevo cliente
        function guardarCliente(e) {
            e.preventDefault();
            
            const modo = formCliente.dataset.modo;
            const nombre = document.getElementById('nombreCliente').value;
            const contacto = document.getElementById('contactoCliente').value;
            const telefono = document.getElementById('telefonoCliente').value;
            const email = document.getElementById('emailCliente').value;
            
            if (modo === 'nuevo') {
                // Crear nuevo cliente
                const nuevoCliente = {
                    id: clientes.length > 0 ? Math.max(...clientes.map(c => c.id)) + 1 : 1,
                    nombre: nombre,
                    contacto: contacto,
                    telefono: telefono,
                    email: email
                };
                
                clientes.push(nuevoCliente);
            } else if (modo === 'editar' && clienteEditando) {
                // Actualizar cliente existente
                const clienteIndex = clientes.findIndex(c => c.id === clienteEditando);
                if (clienteIndex !== -1) {
                    clientes[clienteIndex].nombre = nombre;
                    clientes[clienteIndex].contacto = contacto;
                    clientes[clienteIndex].telefono = telefono;
                    clientes[clienteIndex].email = email;
                }
            }
            
            // Actualizar la interfaz
            actualizarEstadisticas();
            cargarClientes();
            cargarSelects();
            ocultarModal(modalCliente);
            
            alert(modo === 'nuevo' ? 'Cliente creado exitosamente' : 'Cliente actualizado exitosamente');
        }
        
        // Guardar nuevo técnico
        function guardarTecnico(e) {
            e.preventDefault();
            
            const modo = formTecnico.dataset.modo;
            const nombre = document.getElementById('nombreTecnico').value;
            const especialidad = document.getElementById('especialidadTecnico').value;
            const telefono = document.getElementById('telefonoTecnico').value;
            const estado = document.getElementById('estadoTecnico').value;
            
            if (modo === 'nuevo') {
                // Crear nuevo técnico
                const nuevoTecnico = {
                    id: tecnicos.length > 0 ? Math.max(...tecnicos.map(t => t.id)) + 1 : 1,
                    nombre: nombre,
                    especialidad: especialidad,
                    telefono: telefono,
                    estado: estado
                };
                
                tecnicos.push(nuevoTecnico);
            } else if (modo === 'editar' && tecnicoEditando) {
                // Actualizar técnico existente
                const tecnicoIndex = tecnicos.findIndex(t => t.id === tecnicoEditando);
                if (tecnicoIndex !== -1) {
                    tecnicos[tecnicoIndex].nombre = nombre;
                    tecnicos[tecnicoIndex].especialidad = especialidad;
                    tecnicos[tecnicoIndex].telefono = telefono;
                    tecnicos[tecnicoIndex].estado = estado;
                }
            }
            
            // Actualizar la interfaz
            actualizarEstadisticas();
            cargarTecnicos();
            cargarSelects();
            ocultarModal(modalTecnico);
            
            alert(modo === 'nuevo' ? 'Técnico creado exitosamente' : 'Técnico actualizado exitosamente');
        }
        
        // Cambiar estado de orden
        function cambiarEstadoOrden(e) {
            e.preventDefault();
            
            const nuevoEstado = document.getElementById('nuevoEstado').value;
            
            if (ordenCambioEstado) {
                const ordenIndex = ordenes.findIndex(o => o.id === ordenCambioEstado);
                if (ordenIndex !== -1) {
                    ordenes[ordenIndex].estado = nuevoEstado;
                }
            }
            
            // Actualizar la interfaz
            actualizarEstadisticas();
            cargarOrdenes();
            cargarOrdenesCompleta();
            ocultarModal(modalEstado);
            
            alert('Estado de orden actualizado exitosamente');
        }
        
        // Editar orden existente
        function editarOrden(id) {
            const orden = ordenes.find(o => o.id === id);
            if (!orden) return;
            
            // Llenar el formulario con los datos de la orden
            selectCliente.value = orden.clienteId;
            document.getElementById('servicio').value = orden.servicio;
            document.getElementById('descripcion').value = orden.descripcion;
            selectTecnico.value = orden.tecnicoId;
            document.getElementById('prioridad').value = orden.prioridad;
            
            // Cambiar a modo edición
            document.getElementById('tituloModalOrden').textContent = 'Editar Orden de Servicio';
            formOrden.dataset.modo = 'editar';
            ordenEditando = id;
            
            // Mostrar modal
            mostrarModal(modalOrden);
        }
        
        // Editar cliente existente
        function editarCliente(id) {
            const cliente = clientes.find(c => c.id === id);
            if (!cliente) return;
            
            // Llenar el formulario con los datos del cliente
            document.getElementById('nombreCliente').value = cliente.nombre;
            document.getElementById('contactoCliente').value = cliente.contacto;
            document.getElementById('telefonoCliente').value = cliente.telefono;
            document.getElementById('emailCliente').value = cliente.email;
            
            // Cambiar a modo edición
            document.getElementById('tituloModalCliente').textContent = 'Editar Cliente';
            formCliente.dataset.modo = 'editar';
            clienteEditando = id;
            
            // Mostrar modal
            mostrarModal(modalCliente);
        }
        
        // Editar técnico existente
        function editarTecnico(id) {
            const tecnico = tecnicos.find(t => t.id === id);
            if (!tecnico) return;
            
            // Llenar el formulario con los datos del técnico
            document.getElementById('nombreTecnico').value = tecnico.nombre;
            document.getElementById('especialidadTecnico').value = tecnico.especialidad;
            document.getElementById('telefonoTecnico').value = tecnico.telefono;
            document.getElementById('estadoTecnico').value = tecnico.estado;
            
            // Cambiar a modo edición
            document.getElementById('tituloModalTecnico').textContent = 'Editar Técnico';
            formTecnico.dataset.modo = 'editar';
            tecnicoEditando = id;
            
            // Mostrar modal
            mostrarModal(modalTecnico);
        }
        
        // Eliminar orden
        function eliminarOrden(id) {
            if (confirm('¿Está seguro de que desea eliminar esta orden?')) {
                ordenes = ordenes.filter(o => o.id !== id);
                actualizarEstadisticas();
                cargarOrdenes();
                cargarOrdenesCompleta();
                alert('Orden eliminada exitosamente');
            }
        }
        
        // Eliminar cliente
        function eliminarCliente(id) {
            // Verificar si el cliente tiene órdenes asociadas
            const ordenesCliente = ordenes.filter(o => o.clienteId === id);
            if (ordenesCliente.length > 0) {
                alert('No se puede eliminar el cliente porque tiene órdenes de servicio asociadas.');
                return;
            }
            
            if (confirm('¿Está seguro de que desea eliminar este cliente?')) {
                clientes = clientes.filter(c => c.id !== id);
                actualizarEstadisticas();
                cargarClientes();
                cargarSelects();
                alert('Cliente eliminado exitosamente');
            }
        }
        
        // Eliminar técnico
        function eliminarTecnico(id) {
            // Verificar si el técnico tiene órdenes asociadas
            const ordenesTecnico = ordenes.filter(o => o.tecnicoId === id);
            if (ordenesTecnico.length > 0) {
                alert('No se puede eliminar el técnico porque tiene órdenes de servicio asignadas.');
                return;
            }
            
            if (confirm('¿Está seguro de que desea eliminar este técnico?')) {
                tecnicos = tecnicos.filter(t => t.id !== id);
                actualizarEstadisticas();
                cargarTecnicos();
                cargarSelects();
                alert('Técnico eliminado exitosamente');
            }
        }
        
        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', inicializarApp);
    </script>
</body>
</html>